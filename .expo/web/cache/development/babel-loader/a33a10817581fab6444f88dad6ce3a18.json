{"ast":null,"code":"\"use strict\";\n\nvar relativizeSourceMapInline = require(\"../../../lib/relativizeSourceMap\");\n\nvar writeFile = require(\"../writeFile\");\n\nvar buildSourcemapWithMetadata = require(\"./buildSourcemapWithMetadata\");\n\nvar MAGIC_RAM_BUNDLE_NUMBER = require(\"./magic-number\");\n\nvar _require = require(\"./util\"),\n    joinModules = _require.joinModules;\n\nvar writeSourceMap = require(\"./write-sourcemap\");\n\nvar fsPromises = require(\"fs\").promises;\n\nvar path = require(\"path\");\n\nvar MAGIC_RAM_BUNDLE_FILENAME = \"UNBUNDLE\";\nvar MODULES_DIR = \"js-modules\";\n\nfunction saveAsAssets(bundle, options, log) {\n  var bundleOutput = options.bundleOutput,\n      encoding = options.bundleEncoding,\n      sourcemapOutput = options.sourcemapOutput,\n      sourcemapSourcesRoot = options.sourcemapSourcesRoot;\n  log(\"start\");\n  var startupModules = bundle.startupModules,\n      lazyModules = bundle.lazyModules;\n  log(\"finish\");\n  var startupCode = joinModules(startupModules);\n  log(\"Writing bundle output to:\", bundleOutput);\n  var modulesDir = path.join(path.dirname(bundleOutput), MODULES_DIR);\n  var writeUnbundle = createDir(modulesDir).then(function () {\n    return Promise.all([writeModules(lazyModules, modulesDir, encoding), writeFile(bundleOutput, startupCode, encoding), writeMagicFlagFile(modulesDir)]);\n  });\n  writeUnbundle.then(function () {\n    return log(\"Done writing unbundle output\");\n  });\n\n  if (sourcemapOutput) {\n    var sourceMap = buildSourcemapWithMetadata({\n      fixWrapperOffset: true,\n      lazyModules: lazyModules.concat(),\n      moduleGroups: null,\n      startupModules: startupModules.concat()\n    });\n\n    if (sourcemapSourcesRoot !== undefined) {\n      relativizeSourceMapInline(sourceMap, sourcemapSourcesRoot);\n    }\n\n    var wroteSourceMap = writeSourceMap(sourcemapOutput, JSON.stringify(sourceMap), log);\n    return Promise.all([writeUnbundle, wroteSourceMap]);\n  } else {\n    return writeUnbundle;\n  }\n}\n\nfunction createDir(dirName) {\n  return fsPromises.mkdir(dirName, {\n    recursive: true\n  });\n}\n\nfunction writeModuleFile(module, modulesDir, encoding) {\n  var code = module.code,\n      id = module.id;\n  return writeFile(path.join(modulesDir, id + \".js\"), code, encoding);\n}\n\nfunction writeModules(modules, modulesDir, encoding) {\n  var writeFiles = modules.map(function (module) {\n    return writeModuleFile(module, modulesDir, encoding);\n  });\n  return Promise.all(writeFiles);\n}\n\nfunction writeMagicFlagFile(outputDir) {\n  var buffer = Buffer.alloc(4);\n  buffer.writeUInt32LE(MAGIC_RAM_BUNDLE_NUMBER, 0);\n  return writeFile(path.join(outputDir, MAGIC_RAM_BUNDLE_FILENAME), buffer);\n}\n\nmodule.exports = saveAsAssets;","map":{"version":3,"names":["relativizeSourceMapInline","require","writeFile","buildSourcemapWithMetadata","MAGIC_RAM_BUNDLE_NUMBER","joinModules","writeSourceMap","fsPromises","promises","path","MAGIC_RAM_BUNDLE_FILENAME","MODULES_DIR","saveAsAssets","bundle","options","log","bundleOutput","encoding","bundleEncoding","sourcemapOutput","sourcemapSourcesRoot","startupModules","lazyModules","startupCode","modulesDir","join","dirname","writeUnbundle","createDir","then","Promise","all","writeModules","writeMagicFlagFile","sourceMap","fixWrapperOffset","concat","moduleGroups","undefined","wroteSourceMap","JSON","stringify","dirName","mkdir","recursive","writeModuleFile","module","code","id","modules","writeFiles","map","outputDir","buffer","Buffer","alloc","writeUInt32LE","exports"],"sources":["/Users/hozaifa/Documents/Uni App Github/node_modules/@react-native-community/cli-plugin-metro/node_modules/metro/src/shared/output/RamBundle/as-assets.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *\n * @format\n */\n\"use strict\";\n\nconst relativizeSourceMapInline = require(\"../../../lib/relativizeSourceMap\");\n\nconst writeFile = require(\"../writeFile\");\n\nconst buildSourcemapWithMetadata = require(\"./buildSourcemapWithMetadata\");\n\nconst MAGIC_RAM_BUNDLE_NUMBER = require(\"./magic-number\");\n\nconst { joinModules } = require(\"./util\");\n\nconst writeSourceMap = require(\"./write-sourcemap\");\n\nconst fsPromises = require(\"fs\").promises;\n\nconst path = require(\"path\"); // must not start with a dot, as that won't go into the apk\n\nconst MAGIC_RAM_BUNDLE_FILENAME = \"UNBUNDLE\";\nconst MODULES_DIR = \"js-modules\";\n/**\n * Saves all JS modules of an app as single files\n * The startup code (prelude, polyfills etc.) are written to the file\n * designated by the `bundleOuput` option.\n * All other modules go into a 'js-modules' folder that in the same parent\n * directory as the startup file.\n */\n\nfunction saveAsAssets(bundle, options, log) {\n  const {\n    bundleOutput,\n    bundleEncoding: encoding,\n    sourcemapOutput,\n    sourcemapSourcesRoot,\n  } = options;\n  log(\"start\");\n  const { startupModules, lazyModules } = bundle;\n  log(\"finish\");\n  const startupCode = joinModules(startupModules);\n  log(\"Writing bundle output to:\", bundleOutput);\n  const modulesDir = path.join(path.dirname(bundleOutput), MODULES_DIR);\n  const writeUnbundle = createDir(modulesDir).then(\n    // create the modules directory first\n    () =>\n      Promise.all([\n        writeModules(lazyModules, modulesDir, encoding),\n        writeFile(bundleOutput, startupCode, encoding),\n        writeMagicFlagFile(modulesDir),\n      ])\n  );\n  writeUnbundle.then(() => log(\"Done writing unbundle output\"));\n\n  if (sourcemapOutput) {\n    const sourceMap = buildSourcemapWithMetadata({\n      fixWrapperOffset: true,\n      lazyModules: lazyModules.concat(),\n      moduleGroups: null,\n      startupModules: startupModules.concat(),\n    });\n\n    if (sourcemapSourcesRoot !== undefined) {\n      relativizeSourceMapInline(sourceMap, sourcemapSourcesRoot);\n    }\n\n    const wroteSourceMap = writeSourceMap(\n      sourcemapOutput,\n      JSON.stringify(sourceMap),\n      log\n    );\n    return Promise.all([writeUnbundle, wroteSourceMap]);\n  } else {\n    return writeUnbundle;\n  }\n}\n\nfunction createDir(dirName) {\n  return fsPromises.mkdir(dirName, {\n    recursive: true,\n  });\n}\n\nfunction writeModuleFile(module, modulesDir, encoding) {\n  const { code, id } = module;\n  return writeFile(path.join(modulesDir, id + \".js\"), code, encoding);\n}\n\nfunction writeModules(modules, modulesDir, encoding) {\n  const writeFiles = modules.map((module) =>\n    writeModuleFile(module, modulesDir, encoding)\n  );\n  return Promise.all(writeFiles);\n}\n\nfunction writeMagicFlagFile(outputDir) {\n  const buffer = Buffer.alloc(4);\n  buffer.writeUInt32LE(MAGIC_RAM_BUNDLE_NUMBER, 0);\n  return writeFile(path.join(outputDir, MAGIC_RAM_BUNDLE_FILENAME), buffer);\n}\n\nmodule.exports = saveAsAssets;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}