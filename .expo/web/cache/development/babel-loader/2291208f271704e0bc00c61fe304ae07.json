{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar _toConsumableArray = require(\"@babel/runtime/helpers/toConsumableArray\");\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar _require = require(\"../../Bundler/util\"),\n    createRamBundleGroups = _require.createRamBundleGroups;\n\nvar getAppendScripts = require(\"../../lib/getAppendScripts\");\n\nvar getTransitiveDependencies = require(\"./helpers/getTransitiveDependencies\");\n\nvar _require2 = require(\"./helpers/js\"),\n    isJsModule = _require2.isJsModule,\n    wrapModule = _require2.wrapModule;\n\nvar _require3 = require(\"./sourceMapObject\"),\n    sourceMapObject = _require3.sourceMapObject;\n\nvar nullthrows = require(\"nullthrows\");\n\nvar path = require(\"path\");\n\nfunction getRamBundleInfo(entryPoint, pre, graph, options) {\n  var modules, ramModules, _await$_getRamOptions, preloadedModules, ramGroups, startupModules, lazyModules, groups;\n\n  return _regeneratorRuntime.async(function getRamBundleInfo$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          modules = [].concat(_toConsumableArray(pre), _toConsumableArray(graph.dependencies.values()));\n          modules = modules.concat(getAppendScripts(entryPoint, modules, graph.importBundleNames, options));\n          modules.forEach(function (module) {\n            return options.createModuleId(module.path);\n          });\n          ramModules = modules.filter(isJsModule).filter(options.processModuleFilter).map(function (module) {\n            return {\n              id: options.createModuleId(module.path),\n              code: wrapModule(module, options),\n              map: sourceMapObject([module], {\n                excludeSource: options.excludeSource,\n                processModuleFilter: options.processModuleFilter\n              }),\n              name: path.basename(module.path),\n              sourcePath: module.path,\n              source: module.getSource().toString(),\n              type: nullthrows(module.output.find(function (_ref) {\n                var type = _ref.type;\n                return type.startsWith(\"js\");\n              })).type\n            };\n          });\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(_getRamOptions(entryPoint, {\n            dev: options.dev,\n            platform: options.platform\n          }, function (filePath) {\n            return getTransitiveDependencies(filePath, graph);\n          }, options.getTransformOptions));\n\n        case 6:\n          _await$_getRamOptions = _context.sent;\n          preloadedModules = _await$_getRamOptions.preloadedModules;\n          ramGroups = _await$_getRamOptions.ramGroups;\n          startupModules = [];\n          lazyModules = [];\n          ramModules.forEach(function (module) {\n            if (preloadedModules.hasOwnProperty(module.sourcePath)) {\n              startupModules.push(module);\n              return;\n            }\n\n            if (module.type.startsWith(\"js/script\")) {\n              startupModules.push(module);\n              return;\n            }\n\n            if (module.type.startsWith(\"js/module\")) {\n              lazyModules.push(module);\n            }\n          });\n          groups = createRamBundleGroups(ramGroups, lazyModules, function (module, dependenciesByPath) {\n            var deps = getTransitiveDependencies(module.sourcePath, graph);\n            var output = new Set();\n\n            for (var _iterator = _createForOfIteratorHelperLoose(deps), _step; !(_step = _iterator()).done;) {\n              var dependency = _step.value;\n\n              var _module = dependenciesByPath.get(dependency);\n\n              if (_module) {\n                output.add(_module.id);\n              }\n            }\n\n            return output;\n          });\n          return _context.abrupt(\"return\", {\n            getDependencies: function getDependencies(filePath) {\n              return getTransitiveDependencies(filePath, graph);\n            },\n            groups: groups,\n            lazyModules: lazyModules,\n            startupModules: startupModules\n          });\n\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nfunction _getRamOptions(entryFile, options, getDependencies, getTransformOptions) {\n  var _await$getTransformOp, preloadedModules, ramGroups;\n\n  return _regeneratorRuntime.async(function _getRamOptions$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          if (!(getTransformOptions == null)) {\n            _context3.next = 2;\n            break;\n          }\n\n          return _context3.abrupt(\"return\", {\n            preloadedModules: {},\n            ramGroups: []\n          });\n\n        case 2:\n          _context3.next = 4;\n          return _regeneratorRuntime.awrap(getTransformOptions([entryFile], {\n            dev: options.dev,\n            hot: true,\n            platform: options.platform\n          }, function _callee(x) {\n            return _regeneratorRuntime.async(function _callee$(_context2) {\n              while (1) {\n                switch (_context2.prev = _context2.next) {\n                  case 0:\n                    return _context2.abrupt(\"return\", Array.from(getDependencies));\n\n                  case 1:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }\n            }, null, null, null, Promise);\n          }));\n\n        case 4:\n          _await$getTransformOp = _context3.sent;\n          preloadedModules = _await$getTransformOp.preloadedModules;\n          ramGroups = _await$getTransformOp.ramGroups;\n          return _context3.abrupt(\"return\", {\n            preloadedModules: preloadedModules || {},\n            ramGroups: ramGroups || []\n          });\n\n        case 8:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nmodule.exports = getRamBundleInfo;","map":{"version":3,"names":["require","createRamBundleGroups","getAppendScripts","getTransitiveDependencies","isJsModule","wrapModule","sourceMapObject","nullthrows","path","getRamBundleInfo","entryPoint","pre","graph","options","modules","dependencies","values","concat","importBundleNames","forEach","module","createModuleId","ramModules","filter","processModuleFilter","map","id","code","excludeSource","name","basename","sourcePath","source","getSource","toString","type","output","find","startsWith","_getRamOptions","dev","platform","filePath","getTransformOptions","preloadedModules","ramGroups","startupModules","lazyModules","hasOwnProperty","push","groups","dependenciesByPath","deps","Set","dependency","get","add","getDependencies","entryFile","hot","x","Array","from","exports"],"sources":["/Users/hozaifa/Documents/Uni App Github/node_modules/@react-native-community/cli-plugin-metro/node_modules/metro/src/DeltaBundler/Serializers/getRamBundleInfo.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *\n * @format\n */\n\"use strict\";\n\nconst { createRamBundleGroups } = require(\"../../Bundler/util\");\n\nconst getAppendScripts = require(\"../../lib/getAppendScripts\");\n\nconst getTransitiveDependencies = require(\"./helpers/getTransitiveDependencies\");\n\nconst { isJsModule, wrapModule } = require(\"./helpers/js\");\n\nconst { sourceMapObject } = require(\"./sourceMapObject\");\n\nconst nullthrows = require(\"nullthrows\");\n\nconst path = require(\"path\");\n\nasync function getRamBundleInfo(entryPoint, pre, graph, options) {\n  let modules = [...pre, ...graph.dependencies.values()];\n  modules = modules.concat(\n    getAppendScripts(entryPoint, modules, graph.importBundleNames, options)\n  );\n  modules.forEach((module) => options.createModuleId(module.path));\n  const ramModules = modules\n    .filter(isJsModule)\n    .filter(options.processModuleFilter)\n    .map((module) => ({\n      id: options.createModuleId(module.path),\n      code: wrapModule(module, options),\n      map: sourceMapObject([module], {\n        excludeSource: options.excludeSource,\n        processModuleFilter: options.processModuleFilter,\n      }),\n      name: path.basename(module.path),\n      sourcePath: module.path,\n      source: module.getSource().toString(),\n      type: nullthrows(module.output.find(({ type }) => type.startsWith(\"js\")))\n        .type,\n    }));\n  const { preloadedModules, ramGroups } = await _getRamOptions(\n    entryPoint,\n    {\n      dev: options.dev,\n      platform: options.platform,\n    },\n    (filePath) => getTransitiveDependencies(filePath, graph),\n    options.getTransformOptions\n  );\n  const startupModules = [];\n  const lazyModules = [];\n  ramModules.forEach((module) => {\n    if (preloadedModules.hasOwnProperty(module.sourcePath)) {\n      startupModules.push(module);\n      return;\n    }\n\n    if (module.type.startsWith(\"js/script\")) {\n      startupModules.push(module);\n      return;\n    }\n\n    if (module.type.startsWith(\"js/module\")) {\n      lazyModules.push(module);\n    }\n  });\n  const groups = createRamBundleGroups(\n    ramGroups,\n    lazyModules,\n    (module, dependenciesByPath) => {\n      const deps = getTransitiveDependencies(module.sourcePath, graph);\n      const output = new Set();\n\n      for (const dependency of deps) {\n        const module = dependenciesByPath.get(dependency);\n\n        if (module) {\n          output.add(module.id);\n        }\n      }\n\n      return output;\n    }\n  );\n  return {\n    getDependencies: (filePath) => getTransitiveDependencies(filePath, graph),\n    groups,\n    lazyModules,\n    startupModules,\n  };\n}\n/**\n * Returns the options needed to create a RAM bundle.\n */\n\nasync function _getRamOptions(\n  entryFile,\n  options,\n  getDependencies,\n  getTransformOptions\n) {\n  if (getTransformOptions == null) {\n    return {\n      preloadedModules: {},\n      ramGroups: [],\n    };\n  }\n\n  const { preloadedModules, ramGroups } = await getTransformOptions(\n    [entryFile],\n    {\n      dev: options.dev,\n      hot: true,\n      platform: options.platform,\n    },\n    /* $FlowFixMe(>=0.99.0 site=react_native_fb) This comment suppresses an\n     * error found when Flow v0.99 was deployed. To see the error, delete this\n     * comment and run Flow. */\n    async (x) => Array.from(getDependencies)\n  );\n  return {\n    preloadedModules: preloadedModules || {},\n    ramGroups: ramGroups || [],\n  };\n}\n\nmodule.exports = getRamBundleInfo;\n"],"mappings":"AASA;;;;;;;;;;;;AAEA,eAAkCA,OAAO,sBAAzC;AAAA,IAAQC,qBAAR,YAAQA,qBAAR;;AAEA,IAAMC,gBAAgB,GAAGF,OAAO,8BAAhC;;AAEA,IAAMG,yBAAyB,GAAGH,OAAO,uCAAzC;;AAEA,gBAAmCA,OAAO,gBAA1C;AAAA,IAAQI,UAAR,aAAQA,UAAR;AAAA,IAAoBC,UAApB,aAAoBA,UAApB;;AAEA,gBAA4BL,OAAO,qBAAnC;AAAA,IAAQM,eAAR,aAAQA,eAAR;;AAEA,IAAMC,UAAU,GAAGP,OAAO,CAAC,YAAD,CAA1B;;AAEA,IAAMQ,IAAI,GAAGR,OAAO,CAAC,MAAD,CAApB;;AAEA,SAAeS,gBAAf,CAAgCC,UAAhC,EAA4CC,GAA5C,EAAiDC,KAAjD,EAAwDC,OAAxD;EAAA;;EAAA;IAAA;MAAA;QAAA;UACMC,OADN,gCACoBH,GADpB,sBAC4BC,KAAK,CAACG,YAAN,CAAmBC,MAAnB,EAD5B;UAEEF,OAAO,GAAGA,OAAO,CAACG,MAAR,CACRf,gBAAgB,CAACQ,UAAD,EAAaI,OAAb,EAAsBF,KAAK,CAACM,iBAA5B,EAA+CL,OAA/C,CADR,CAAV;UAGAC,OAAO,CAACK,OAAR,CAAgB,UAACC,MAAD;YAAA,OAAYP,OAAO,CAACQ,cAAR,CAAuBD,MAAM,CAACZ,IAA9B,CAAZ;UAAA,CAAhB;UACMc,UANR,GAMqBR,OAAO,CACvBS,MADgB,CACTnB,UADS,EAEhBmB,MAFgB,CAETV,OAAO,CAACW,mBAFC,EAGhBC,GAHgB,CAGZ,UAACL,MAAD;YAAA,OAAa;cAChBM,EAAE,EAAEb,OAAO,CAACQ,cAAR,CAAuBD,MAAM,CAACZ,IAA9B,CADY;cAEhBmB,IAAI,EAAEtB,UAAU,CAACe,MAAD,EAASP,OAAT,CAFA;cAGhBY,GAAG,EAAEnB,eAAe,CAAC,CAACc,MAAD,CAAD,EAAW;gBAC7BQ,aAAa,EAAEf,OAAO,CAACe,aADM;gBAE7BJ,mBAAmB,EAAEX,OAAO,CAACW;cAFA,CAAX,CAHJ;cAOhBK,IAAI,EAAErB,IAAI,CAACsB,QAAL,CAAcV,MAAM,CAACZ,IAArB,CAPU;cAQhBuB,UAAU,EAAEX,MAAM,CAACZ,IARH;cAShBwB,MAAM,EAAEZ,MAAM,CAACa,SAAP,GAAmBC,QAAnB,EATQ;cAUhBC,IAAI,EAAE5B,UAAU,CAACa,MAAM,CAACgB,MAAP,CAAcC,IAAd,CAAmB;gBAAA,IAAGF,IAAH,QAAGA,IAAH;gBAAA,OAAcA,IAAI,CAACG,UAAL,CAAgB,IAAhB,CAAd;cAAA,CAAnB,CAAD,CAAV,CACHH;YAXa,CAAb;UAAA,CAHY,CANrB;UAAA;UAAA,iCAsBgDI,cAAc,CAC1D7B,UAD0D,EAE1D;YACE8B,GAAG,EAAE3B,OAAO,CAAC2B,GADf;YAEEC,QAAQ,EAAE5B,OAAO,CAAC4B;UAFpB,CAF0D,EAM1D,UAACC,QAAD;YAAA,OAAcvC,yBAAyB,CAACuC,QAAD,EAAW9B,KAAX,CAAvC;UAAA,CAN0D,EAO1DC,OAAO,CAAC8B,mBAPkD,CAtB9D;;QAAA;UAAA;UAsBUC,gBAtBV,yBAsBUA,gBAtBV;UAsB4BC,SAtB5B,yBAsB4BA,SAtB5B;UA+BQC,cA/BR,GA+ByB,EA/BzB;UAgCQC,WAhCR,GAgCsB,EAhCtB;UAiCEzB,UAAU,CAACH,OAAX,CAAmB,UAACC,MAAD,EAAY;YAC7B,IAAIwB,gBAAgB,CAACI,cAAjB,CAAgC5B,MAAM,CAACW,UAAvC,CAAJ,EAAwD;cACtDe,cAAc,CAACG,IAAf,CAAoB7B,MAApB;cACA;YACD;;YAED,IAAIA,MAAM,CAACe,IAAP,CAAYG,UAAZ,CAAuB,WAAvB,CAAJ,EAAyC;cACvCQ,cAAc,CAACG,IAAf,CAAoB7B,MAApB;cACA;YACD;;YAED,IAAIA,MAAM,CAACe,IAAP,CAAYG,UAAZ,CAAuB,WAAvB,CAAJ,EAAyC;cACvCS,WAAW,CAACE,IAAZ,CAAiB7B,MAAjB;YACD;UACF,CAdD;UAeM8B,MAhDR,GAgDiBjD,qBAAqB,CAClC4C,SADkC,EAElCE,WAFkC,EAGlC,UAAC3B,MAAD,EAAS+B,kBAAT,EAAgC;YAC9B,IAAMC,IAAI,GAAGjD,yBAAyB,CAACiB,MAAM,CAACW,UAAR,EAAoBnB,KAApB,CAAtC;YACA,IAAMwB,MAAM,GAAG,IAAIiB,GAAJ,EAAf;;YAEA,qDAAyBD,IAAzB,wCAA+B;cAAA,IAApBE,UAAoB;;cAC7B,IAAMlC,OAAM,GAAG+B,kBAAkB,CAACI,GAAnB,CAAuBD,UAAvB,CAAf;;cAEA,IAAIlC,OAAJ,EAAY;gBACVgB,MAAM,CAACoB,GAAP,CAAWpC,OAAM,CAACM,EAAlB;cACD;YACF;;YAED,OAAOU,MAAP;UACD,CAhBiC,CAhDtC;UAAA,iCAkES;YACLqB,eAAe,EAAE,yBAACf,QAAD;cAAA,OAAcvC,yBAAyB,CAACuC,QAAD,EAAW9B,KAAX,CAAvC;YAAA,CADZ;YAELsC,MAAM,EAANA,MAFK;YAGLH,WAAW,EAAXA,WAHK;YAILD,cAAc,EAAdA;UAJK,CAlET;;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA;;AA6EA,SAAeP,cAAf,CACEmB,SADF,EAEE7C,OAFF,EAGE4C,eAHF,EAIEd,mBAJF;EAAA;;EAAA;IAAA;MAAA;QAAA;UAAA,MAMMA,mBAAmB,IAAI,IAN7B;YAAA;YAAA;UAAA;;UAAA,kCAOW;YACLC,gBAAgB,EAAE,EADb;YAELC,SAAS,EAAE;UAFN,CAPX;;QAAA;UAAA;UAAA,iCAagDF,mBAAmB,CAC/D,CAACe,SAAD,CAD+D,EAE/D;YACElB,GAAG,EAAE3B,OAAO,CAAC2B,GADf;YAEEmB,GAAG,EAAE,IAFP;YAGElB,QAAQ,EAAE5B,OAAO,CAAC4B;UAHpB,CAF+D,EAU/D,iBAAOmB,CAAP;YAAA;cAAA;gBAAA;kBAAA;oBAAA,kCAAaC,KAAK,CAACC,IAAN,CAAWL,eAAX,CAAb;;kBAAA;kBAAA;oBAAA;gBAAA;cAAA;YAAA;UAAA,CAV+D,CAbnE;;QAAA;UAAA;UAaUb,gBAbV,yBAaUA,gBAbV;UAa4BC,SAb5B,yBAa4BA,SAb5B;UAAA,kCAyBS;YACLD,gBAAgB,EAAEA,gBAAgB,IAAI,EADjC;YAELC,SAAS,EAAEA,SAAS,IAAI;UAFnB,CAzBT;;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA;;AA+BAzB,MAAM,CAAC2C,OAAP,GAAiBtD,gBAAjB"},"metadata":{},"sourceType":"script"}