{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nvar HttpError = require(\"./HttpError\");\n\nvar NetworkError = require(\"./NetworkError\");\n\nvar http = require(\"http\");\n\nvar https = require(\"https\");\n\nvar url = require(\"url\");\n\nvar zlib = require(\"zlib\");\n\nvar ZLIB_OPTIONS = {\n  level: 9\n};\nvar NULL_BYTE = 0x00;\nvar NULL_BYTE_BUFFER = Buffer.from([NULL_BYTE]);\n\nvar HttpStore = function () {\n  function HttpStore(options) {\n    _classCallCheck(this, HttpStore);\n\n    var uri = url.parse(options.endpoint);\n    var module = uri.protocol === \"http:\" ? http : https;\n    var agentConfig = {\n      family: options.family,\n      keepAlive: true,\n      keepAliveMsecs: options.timeout || 5000,\n      maxSockets: 64,\n      maxFreeSockets: 64\n    };\n\n    if (options.key != null) {\n      agentConfig.key = options.key;\n    }\n\n    if (options.cert != null) {\n      agentConfig.cert = options.cert;\n    }\n\n    if (options.ca != null) {\n      agentConfig.ca = options.ca;\n    }\n\n    if (!uri.hostname || !uri.pathname) {\n      throw new TypeError(\"Invalid endpoint: \" + options.endpoint);\n    }\n\n    this._module = module;\n    this._timeout = options.timeout || 5000;\n    this._host = uri.hostname;\n    this._path = uri.pathname;\n    this._port = +uri.port;\n    this._getAgent = new module.Agent(agentConfig);\n    this._setAgent = new module.Agent(agentConfig);\n  }\n\n  _createClass(HttpStore, [{\n    key: \"get\",\n    value: function get(key) {\n      var _this = this;\n\n      return new Promise(function (resolve, reject) {\n        var options = {\n          agent: _this._getAgent,\n          host: _this._host,\n          method: \"GET\",\n          path: _this._path + \"/\" + key.toString(\"hex\"),\n          port: _this._port,\n          timeout: _this._timeout\n        };\n\n        var req = _this._module.request(options, function (res) {\n          var code = res.statusCode;\n          var data = [];\n\n          if (code === 404) {\n            res.resume();\n            resolve(null);\n            return;\n          } else if (code !== 200) {\n            res.resume();\n            reject(new HttpError(\"HTTP error: \" + code, code));\n            return;\n          }\n\n          var gunzipped = res.pipe(zlib.createGunzip());\n          gunzipped.on(\"data\", function (chunk) {\n            data.push(chunk);\n          });\n          gunzipped.on(\"error\", function (err) {\n            reject(err);\n          });\n          gunzipped.on(\"end\", function () {\n            try {\n              var buffer = Buffer.concat(data);\n\n              if (buffer.length > 0 && buffer[0] === NULL_BYTE) {\n                resolve(buffer.slice(1));\n              } else {\n                resolve(JSON.parse(buffer.toString(\"utf8\")));\n              }\n            } catch (err) {\n              reject(err);\n            }\n          });\n          res.on(\"error\", function (err) {\n            return gunzipped.emit(\"error\", err);\n          });\n        });\n\n        req.on(\"error\", function (err) {\n          reject(new NetworkError(err.message, err.code));\n        });\n        req.end();\n      });\n    }\n  }, {\n    key: \"set\",\n    value: function set(key, value) {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        var gzip = zlib.createGzip(ZLIB_OPTIONS);\n        var options = {\n          agent: _this2._setAgent,\n          host: _this2._host,\n          method: \"PUT\",\n          path: _this2._path + \"/\" + key.toString(\"hex\"),\n          port: _this2._port,\n          timeout: _this2._timeout\n        };\n\n        var req = _this2._module.request(options, function (res) {\n          var code = res.statusCode;\n\n          if (code < 200 || code > 299) {\n            res.resume();\n            reject(new HttpError(\"HTTP error: \" + code, code));\n            return;\n          }\n\n          res.on(\"error\", function (err) {\n            reject(err);\n          });\n          res.on(\"end\", function () {\n            resolve();\n          });\n          res.resume();\n        });\n\n        gzip.pipe(req);\n\n        if (value instanceof Buffer) {\n          gzip.write(NULL_BYTE_BUFFER);\n          gzip.end(value);\n        } else {\n          gzip.end(JSON.stringify(value) || \"null\");\n        }\n      });\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {}\n  }]);\n\n  return HttpStore;\n}();\n\nHttpStore.HttpError = HttpError;\nHttpStore.NetworkError = NetworkError;\nmodule.exports = HttpStore;","map":{"version":3,"names":["HttpError","require","NetworkError","http","https","url","zlib","ZLIB_OPTIONS","level","NULL_BYTE","NULL_BYTE_BUFFER","Buffer","from","HttpStore","options","uri","parse","endpoint","module","protocol","agentConfig","family","keepAlive","keepAliveMsecs","timeout","maxSockets","maxFreeSockets","key","cert","ca","hostname","pathname","TypeError","_module","_timeout","_host","_path","_port","port","_getAgent","Agent","_setAgent","Promise","resolve","reject","agent","host","method","path","toString","req","request","res","code","statusCode","data","resume","gunzipped","pipe","createGunzip","on","chunk","push","err","buffer","concat","length","slice","JSON","emit","message","end","value","gzip","createGzip","write","stringify","exports"],"sources":["/Users/hozaifa/Documents/Uni App Github/node_modules/@react-native-community/cli-plugin-metro/node_modules/metro-cache/src/stores/HttpStore.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n *\n */\n\"use strict\";\n\nconst HttpError = require(\"./HttpError\");\n\nconst NetworkError = require(\"./NetworkError\");\n\nconst http = require(\"http\");\n\nconst https = require(\"https\");\n\nconst url = require(\"url\");\n\nconst zlib = require(\"zlib\");\n\nconst ZLIB_OPTIONS = {\n  level: 9,\n};\nconst NULL_BYTE = 0x00;\nconst NULL_BYTE_BUFFER = Buffer.from([NULL_BYTE]);\n\nclass HttpStore {\n  static HttpError = HttpError;\n  static NetworkError = NetworkError;\n\n  constructor(options) {\n    const uri = url.parse(options.endpoint);\n    const module = uri.protocol === \"http:\" ? http : https;\n    const agentConfig = {\n      family: options.family,\n      keepAlive: true,\n      keepAliveMsecs: options.timeout || 5000,\n      maxSockets: 64,\n      maxFreeSockets: 64,\n    };\n\n    if (options.key != null) {\n      // $FlowFixMe `key` is missing in the Flow definition\n      agentConfig.key = options.key;\n    }\n\n    if (options.cert != null) {\n      // $FlowFixMe `cert` is missing in the Flow definition\n      agentConfig.cert = options.cert;\n    }\n\n    if (options.ca != null) {\n      // $FlowFixMe `ca` is missing in the Flow definition\n      agentConfig.ca = options.ca;\n    }\n\n    if (!uri.hostname || !uri.pathname) {\n      throw new TypeError(\"Invalid endpoint: \" + options.endpoint);\n    }\n\n    this._module = module;\n    this._timeout = options.timeout || 5000;\n    this._host = uri.hostname;\n    this._path = uri.pathname;\n    this._port = +uri.port;\n    this._getAgent = new module.Agent(agentConfig);\n    this._setAgent = new module.Agent(agentConfig);\n  }\n\n  get(key) {\n    return new Promise((resolve, reject) => {\n      const options = {\n        agent: this._getAgent,\n        host: this._host,\n        method: \"GET\",\n        path: this._path + \"/\" + key.toString(\"hex\"),\n        port: this._port,\n        timeout: this._timeout,\n      };\n      /* $FlowFixMe(>=0.101.0 site=react_native_fb) This comment suppresses an\n       * error found when Flow v0.101 was deployed. To see the error, delete\n       * this comment and run Flow. */\n\n      const req = this._module.request(options, (res) => {\n        const code = res.statusCode;\n        const data = [];\n\n        if (code === 404) {\n          res.resume();\n          resolve(null);\n          return;\n        } else if (code !== 200) {\n          res.resume();\n          reject(new HttpError(\"HTTP error: \" + code, code));\n          return;\n        }\n\n        const gunzipped = res.pipe(zlib.createGunzip());\n        gunzipped.on(\"data\", (chunk) => {\n          data.push(chunk);\n        });\n        gunzipped.on(\"error\", (err) => {\n          reject(err);\n        });\n        gunzipped.on(\"end\", () => {\n          try {\n            const buffer = Buffer.concat(data);\n\n            if (buffer.length > 0 && buffer[0] === NULL_BYTE) {\n              resolve(buffer.slice(1));\n            } else {\n              resolve(JSON.parse(buffer.toString(\"utf8\")));\n            }\n          } catch (err) {\n            reject(err);\n          }\n        });\n        res.on(\"error\", (err) => gunzipped.emit(\"error\", err));\n      });\n\n      req.on(\"error\", (err) => {\n        reject(new NetworkError(err.message, err.code));\n      });\n      req.end();\n    });\n  }\n\n  set(key, value) {\n    return new Promise((resolve, reject) => {\n      const gzip = zlib.createGzip(ZLIB_OPTIONS);\n      const options = {\n        agent: this._setAgent,\n        host: this._host,\n        method: \"PUT\",\n        path: this._path + \"/\" + key.toString(\"hex\"),\n        port: this._port,\n        timeout: this._timeout,\n      };\n      /* $FlowFixMe(>=0.101.0 site=react_native_fb) This comment suppresses an\n       * error found when Flow v0.101 was deployed. To see the error, delete\n       * this comment and run Flow. */\n\n      const req = this._module.request(options, (res) => {\n        const code = res.statusCode;\n\n        if (code < 200 || code > 299) {\n          res.resume();\n          reject(new HttpError(\"HTTP error: \" + code, code));\n          return;\n        }\n\n        res.on(\"error\", (err) => {\n          reject(err);\n        });\n        res.on(\"end\", () => {\n          resolve();\n        }); // Consume all the data from the response without processing it.\n\n        res.resume();\n      });\n\n      gzip.pipe(req);\n\n      if (value instanceof Buffer) {\n        gzip.write(NULL_BYTE_BUFFER);\n        gzip.end(value);\n      } else {\n        gzip.end(JSON.stringify(value) || \"null\");\n      }\n    });\n  }\n\n  clear() {\n    // Not implemented.\n  }\n}\n\nmodule.exports = HttpStore;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}