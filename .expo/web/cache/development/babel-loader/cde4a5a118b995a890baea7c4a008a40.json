{"ast":null,"code":"\"use strict\";\n\nvar _defineProperty = require(\"@babel/runtime/helpers/defineProperty\");\n\nvar _extends = require(\"@babel/runtime/helpers/extends\");\n\nvar _objectWithoutProperties = require(\"@babel/runtime/helpers/objectWithoutProperties\");\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar _excluded = [\"waitForBundler\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nvar makeBuildCommand = require(\"./commands/build\");\n\nvar makeDependenciesCommand = require(\"./commands/dependencies\");\n\nvar makeServeCommand = require(\"./commands/serve\");\n\nvar MetroHmrServer = require(\"./HmrServer\");\n\nvar IncrementalBundler = require(\"./IncrementalBundler\");\n\nvar createWebsocketServer = require(\"./lib/createWebsocketServer\");\n\nvar MetroServer = require(\"./Server\");\n\nvar outputBundle = require(\"./shared/output/bundle\");\n\nvar chalk = require(\"chalk\");\n\nvar fs = require(\"fs\");\n\nvar http = require(\"http\");\n\nvar https = require(\"https\");\n\nvar _require = require(\"metro-config\"),\n    getDefaultConfig = _require.getDefaultConfig,\n    loadConfig = _require.loadConfig,\n    mergeConfig = _require.mergeConfig;\n\nvar _require2 = require(\"metro-inspector-proxy\"),\n    InspectorProxy = _require2.InspectorProxy;\n\nvar _require3 = require(\"url\"),\n    parse = _require3.parse;\n\nvar ws = require(\"ws\");\n\nfunction getConfig(config) {\n  var defaultConfig;\n  return _regeneratorRuntime.async(function getConfig$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(getDefaultConfig(config.projectRoot));\n\n        case 2:\n          defaultConfig = _context.sent;\n          return _context.abrupt(\"return\", mergeConfig(defaultConfig, config));\n\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nfunction runMetro(config, options) {\n  var mergedConfig, reporter, port, _ref, _ref$waitForBundler, waitForBundler, serverOptions, server, readyPromise;\n\n  return _regeneratorRuntime.async(function runMetro$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return _regeneratorRuntime.awrap(getConfig(config));\n\n        case 2:\n          mergedConfig = _context2.sent;\n          reporter = mergedConfig.reporter, port = mergedConfig.server.port;\n          reporter.update({\n            hasReducedPerformance: options ? Boolean(options.hasReducedPerformance) : false,\n            port: port,\n            type: \"initialize_started\"\n          });\n          _ref = options !== null && options !== void 0 ? options : {}, _ref$waitForBundler = _ref.waitForBundler, waitForBundler = _ref$waitForBundler === void 0 ? false : _ref$waitForBundler, serverOptions = _objectWithoutProperties(_ref, _excluded);\n          server = new MetroServer(mergedConfig, serverOptions);\n          readyPromise = server.ready().then(function () {\n            reporter.update({\n              type: \"initialize_done\",\n              port: port\n            });\n          }).catch(function (error) {\n            reporter.update({\n              type: \"initialize_failed\",\n              port: port,\n              error: error\n            });\n          });\n\n          if (!waitForBundler) {\n            _context2.next = 11;\n            break;\n          }\n\n          _context2.next = 11;\n          return _regeneratorRuntime.awrap(readyPromise);\n\n        case 11:\n          return _context2.abrupt(\"return\", server);\n\n        case 12:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nexports.runMetro = runMetro;\nexports.loadConfig = loadConfig;\n\nvar createConnectMiddleware = function _callee(config, options) {\n  var metroServer, enhancedMiddleware;\n  return _regeneratorRuntime.async(function _callee$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return _regeneratorRuntime.awrap(runMetro(config, options));\n\n        case 2:\n          metroServer = _context3.sent;\n          enhancedMiddleware = metroServer.processRequest;\n\n          if (config.server.enhanceMiddleware) {\n            enhancedMiddleware = config.server.enhanceMiddleware(enhancedMiddleware, metroServer);\n          }\n\n          return _context3.abrupt(\"return\", {\n            attachHmrServer: function attachHmrServer(httpServer) {\n              var wss = createWebsocketServer({\n                websocketServer: new MetroHmrServer(metroServer.getBundler(), metroServer.getCreateModuleId(), config)\n              });\n              httpServer.on(\"upgrade\", function (request, socket, head) {\n                var _parse = parse(request.url),\n                    pathname = _parse.pathname;\n\n                if (pathname === \"/hot\") {\n                  wss.handleUpgrade(request, socket, head, function (ws) {\n                    wss.emit(\"connection\", ws, request);\n                  });\n                } else {\n                  socket.destroy();\n                }\n              });\n            },\n            metroServer: metroServer,\n            middleware: enhancedMiddleware,\n            end: function end() {\n              metroServer.end();\n            }\n          });\n\n        case 6:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nexports.createConnectMiddleware = createConnectMiddleware;\n\nexports.runServer = function _callee2(config, _ref2) {\n  var _ref2$hasReducedPerfo, hasReducedPerformance, host, onError, onReady, secureServerOptions, secure, secureCert, secureKey, _ref2$waitForBundler, waitForBundler, _ref2$websocketEndpoi, websocketEndpoints, connect, serverApp, _await$createConnectM, middleware, end, metroServer, inspectorProxy, httpServer, options;\n\n  return _regeneratorRuntime.async(function _callee2$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _ref2$hasReducedPerfo = _ref2.hasReducedPerformance, hasReducedPerformance = _ref2$hasReducedPerfo === void 0 ? false : _ref2$hasReducedPerfo, host = _ref2.host, onError = _ref2.onError, onReady = _ref2.onReady, secureServerOptions = _ref2.secureServerOptions, secure = _ref2.secure, secureCert = _ref2.secureCert, secureKey = _ref2.secureKey, _ref2$waitForBundler = _ref2.waitForBundler, waitForBundler = _ref2$waitForBundler === void 0 ? false : _ref2$waitForBundler, _ref2$websocketEndpoi = _ref2.websocketEndpoints, websocketEndpoints = _ref2$websocketEndpoi === void 0 ? {} : _ref2$websocketEndpoi;\n\n          if (secure != null || secureCert != null || secureKey != null) {\n            console.warn(chalk.inverse.yellow.bold(\" DEPRECATED \"), \"The `secure`, `secureCert`, and `secureKey` options are now deprecated. \" + \"Please use the `secureServerOptions` object instead to pass options to \" + \"Metro's https development server.\");\n          }\n\n          connect = require(\"connect\");\n          serverApp = connect();\n          _context4.next = 6;\n          return _regeneratorRuntime.awrap(createConnectMiddleware(config, {\n            hasReducedPerformance: hasReducedPerformance,\n            waitForBundler: waitForBundler\n          }));\n\n        case 6:\n          _await$createConnectM = _context4.sent;\n          middleware = _await$createConnectM.middleware;\n          end = _await$createConnectM.end;\n          metroServer = _await$createConnectM.metroServer;\n          serverApp.use(middleware);\n          inspectorProxy = null;\n\n          if (config.server.runInspectorProxy) {\n            inspectorProxy = new InspectorProxy(config.projectRoot);\n          }\n\n          if (secure || secureServerOptions != null) {\n            options = secureServerOptions;\n\n            if (typeof secureKey === \"string\" && typeof secureCert === \"string\") {\n              options = _extends({\n                key: fs.readFileSync(secureKey),\n                cert: fs.readFileSync(secureCert)\n              }, secureServerOptions);\n            }\n\n            httpServer = https.createServer(options, serverApp);\n          } else {\n            httpServer = http.createServer(serverApp);\n          }\n\n          httpServer.on(\"error\", function (error) {\n            if (onError) {\n              onError(error);\n            }\n\n            end();\n          });\n          return _context4.abrupt(\"return\", new Promise(function (resolve, reject) {\n            httpServer.listen(config.server.port, host, function () {\n              if (onReady) {\n                onReady(httpServer);\n              }\n\n              _extends(websocketEndpoints, _objectSpread(_objectSpread({}, inspectorProxy ? _objectSpread({}, inspectorProxy.createWebSocketListeners(httpServer)) : {}), {}, {\n                \"/hot\": createWebsocketServer({\n                  websocketServer: new MetroHmrServer(metroServer.getBundler(), metroServer.getCreateModuleId(), config)\n                })\n              }));\n\n              httpServer.on(\"upgrade\", function (request, socket, head) {\n                var _parse2 = parse(request.url),\n                    pathname = _parse2.pathname;\n\n                if (pathname != null && websocketEndpoints[pathname]) {\n                  websocketEndpoints[pathname].handleUpgrade(request, socket, head, function (ws) {\n                    websocketEndpoints[pathname].emit(\"connection\", ws, request);\n                  });\n                } else {\n                  socket.destroy();\n                }\n              });\n\n              if (inspectorProxy) {\n                serverApp.use(inspectorProxy.processRequest.bind(inspectorProxy));\n              }\n\n              resolve(httpServer);\n            });\n            httpServer.timeout = 0;\n            httpServer.on(\"error\", function (error) {\n              end();\n              reject(error);\n            });\n            httpServer.on(\"close\", function () {\n              end();\n            });\n          }));\n\n        case 16:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nexports.runBuild = function _callee3(config, _ref3) {\n  var _ref3$dev, dev, entry, onBegin, onComplete, onProgress, _ref3$minify, minify, _ref3$output, output, out, _ref3$platform, platform, _ref3$sourceMap, sourceMap, sourceMapUrl, metroServer, requestOptions, metroBundle, bundleOutput, sourcemapOutput, outputOptions;\n\n  return _regeneratorRuntime.async(function _callee3$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _ref3$dev = _ref3.dev, dev = _ref3$dev === void 0 ? false : _ref3$dev, entry = _ref3.entry, onBegin = _ref3.onBegin, onComplete = _ref3.onComplete, onProgress = _ref3.onProgress, _ref3$minify = _ref3.minify, minify = _ref3$minify === void 0 ? true : _ref3$minify, _ref3$output = _ref3.output, output = _ref3$output === void 0 ? outputBundle : _ref3$output, out = _ref3.out, _ref3$platform = _ref3.platform, platform = _ref3$platform === void 0 ? \"web\" : _ref3$platform, _ref3$sourceMap = _ref3.sourceMap, sourceMap = _ref3$sourceMap === void 0 ? false : _ref3$sourceMap, sourceMapUrl = _ref3.sourceMapUrl;\n          _context5.next = 3;\n          return _regeneratorRuntime.awrap(runMetro(config, {\n            watch: false\n          }));\n\n        case 3:\n          metroServer = _context5.sent;\n          _context5.prev = 4;\n          requestOptions = {\n            dev: dev,\n            entryFile: entry,\n            inlineSourceMap: sourceMap && !sourceMapUrl,\n            minify: minify,\n            platform: platform,\n            sourceMapUrl: sourceMap === false ? undefined : sourceMapUrl,\n            createModuleIdFactory: config.serializer.createModuleIdFactory,\n            onProgress: onProgress\n          };\n\n          if (onBegin) {\n            onBegin();\n          }\n\n          _context5.next = 9;\n          return _regeneratorRuntime.awrap(output.build(metroServer, requestOptions));\n\n        case 9:\n          metroBundle = _context5.sent;\n\n          if (onComplete) {\n            onComplete();\n          }\n\n          if (!out) {\n            _context5.next = 17;\n            break;\n          }\n\n          bundleOutput = out.replace(/(\\.js)?$/, \".js\");\n          sourcemapOutput = sourceMap === false ? undefined : out.replace(/(\\.js)?$/, \".map\");\n          outputOptions = {\n            bundleOutput: bundleOutput,\n            sourcemapOutput: sourcemapOutput,\n            dev: dev,\n            platform: platform\n          };\n          _context5.next = 17;\n          return _regeneratorRuntime.awrap(output.save(metroBundle, outputOptions, console.log));\n\n        case 17:\n          return _context5.abrupt(\"return\", metroBundle);\n\n        case 18:\n          _context5.prev = 18;\n          _context5.next = 21;\n          return _regeneratorRuntime.awrap(metroServer.end());\n\n        case 21:\n          return _context5.finish(18);\n\n        case 22:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, null, null, [[4,, 18, 22]], Promise);\n};\n\nexports.buildGraph = function _callee4(config, _ref4) {\n  var _ref4$customTransform, customTransformOptions, _ref4$dev, dev, entries, _ref4$minify, minify, onProgress, _ref4$platform, platform, _ref4$type, type, mergedConfig, bundler;\n\n  return _regeneratorRuntime.async(function _callee4$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _ref4$customTransform = _ref4.customTransformOptions, customTransformOptions = _ref4$customTransform === void 0 ? Object.create(null) : _ref4$customTransform, _ref4$dev = _ref4.dev, dev = _ref4$dev === void 0 ? false : _ref4$dev, entries = _ref4.entries, _ref4$minify = _ref4.minify, minify = _ref4$minify === void 0 ? false : _ref4$minify, onProgress = _ref4.onProgress, _ref4$platform = _ref4.platform, platform = _ref4$platform === void 0 ? \"web\" : _ref4$platform, _ref4$type = _ref4.type, type = _ref4$type === void 0 ? \"module\" : _ref4$type;\n          _context6.next = 3;\n          return _regeneratorRuntime.awrap(getConfig(config));\n\n        case 3:\n          mergedConfig = _context6.sent;\n          bundler = new IncrementalBundler(mergedConfig);\n          _context6.prev = 5;\n          _context6.next = 8;\n          return _regeneratorRuntime.awrap(bundler.buildGraphForEntries(entries, _objectSpread(_objectSpread({}, MetroServer.DEFAULT_GRAPH_OPTIONS), {}, {\n            customTransformOptions: customTransformOptions,\n            dev: dev,\n            minify: minify,\n            platform: platform,\n            type: type\n          })));\n\n        case 8:\n          return _context6.abrupt(\"return\", _context6.sent);\n\n        case 9:\n          _context6.prev = 9;\n          bundler.end();\n          return _context6.finish(9);\n\n        case 12:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, null, null, [[5,, 9, 12]], Promise);\n};\n\nexports.attachMetroCli = function (yargs) {\n  var _ref5 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref5$build = _ref5.build,\n      build = _ref5$build === void 0 ? {} : _ref5$build,\n      _ref5$serve = _ref5.serve,\n      serve = _ref5$serve === void 0 ? {} : _ref5$serve,\n      _ref5$dependencies = _ref5.dependencies,\n      dependencies = _ref5$dependencies === void 0 ? {} : _ref5$dependencies;\n\n  if (build) {\n    var _makeBuildCommand = makeBuildCommand(),\n        command = _makeBuildCommand.command,\n        description = _makeBuildCommand.description,\n        builder = _makeBuildCommand.builder,\n        handler = _makeBuildCommand.handler;\n\n    yargs.command(command, description, builder, handler);\n  }\n\n  if (serve) {\n    var _makeServeCommand = makeServeCommand(),\n        _command = _makeServeCommand.command,\n        _description = _makeServeCommand.description,\n        _builder = _makeServeCommand.builder,\n        _handler = _makeServeCommand.handler;\n\n    yargs.command(_command, _description, _builder, _handler);\n  }\n\n  if (dependencies) {\n    var _makeDependenciesComm = makeDependenciesCommand(),\n        _command2 = _makeDependenciesComm.command,\n        _description2 = _makeDependenciesComm.description,\n        _builder2 = _makeDependenciesComm.builder,\n        _handler2 = _makeDependenciesComm.handler;\n\n    yargs.command(_command2, _description2, _builder2, _handler2);\n  }\n\n  return yargs;\n};","map":{"version":3,"names":["makeBuildCommand","require","makeDependenciesCommand","makeServeCommand","MetroHmrServer","IncrementalBundler","createWebsocketServer","MetroServer","outputBundle","chalk","fs","http","https","getDefaultConfig","loadConfig","mergeConfig","InspectorProxy","parse","ws","getConfig","config","projectRoot","defaultConfig","runMetro","options","mergedConfig","reporter","port","server","update","hasReducedPerformance","Boolean","type","waitForBundler","serverOptions","readyPromise","ready","then","catch","error","exports","createConnectMiddleware","metroServer","enhancedMiddleware","processRequest","enhanceMiddleware","attachHmrServer","httpServer","wss","websocketServer","getBundler","getCreateModuleId","on","request","socket","head","url","pathname","handleUpgrade","emit","destroy","middleware","end","runServer","host","onError","onReady","secureServerOptions","secure","secureCert","secureKey","websocketEndpoints","console","warn","inverse","yellow","bold","connect","serverApp","use","inspectorProxy","runInspectorProxy","key","readFileSync","cert","createServer","Promise","resolve","reject","listen","createWebSocketListeners","bind","timeout","runBuild","dev","entry","onBegin","onComplete","onProgress","minify","output","out","platform","sourceMap","sourceMapUrl","watch","requestOptions","entryFile","inlineSourceMap","undefined","createModuleIdFactory","serializer","build","metroBundle","bundleOutput","replace","sourcemapOutput","outputOptions","save","log","buildGraph","customTransformOptions","Object","create","entries","bundler","buildGraphForEntries","DEFAULT_GRAPH_OPTIONS","attachMetroCli","yargs","serve","dependencies","command","description","builder","handler"],"sources":["/Users/hozaifa/Documents/Uni App Github/node_modules/@react-native-community/cli-plugin-metro/node_modules/metro/src/index.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *\n * @format\n */\n\"use strict\";\n\nconst makeBuildCommand = require(\"./commands/build\");\n\nconst makeDependenciesCommand = require(\"./commands/dependencies\");\n\nconst makeServeCommand = require(\"./commands/serve\");\n\nconst MetroHmrServer = require(\"./HmrServer\");\n\nconst IncrementalBundler = require(\"./IncrementalBundler\");\n\nconst createWebsocketServer = require(\"./lib/createWebsocketServer\");\n\nconst MetroServer = require(\"./Server\");\n\nconst outputBundle = require(\"./shared/output/bundle\");\n\nconst chalk = require(\"chalk\");\n\nconst fs = require(\"fs\");\n\nconst http = require(\"http\");\n\nconst https = require(\"https\");\n\nconst { getDefaultConfig, loadConfig, mergeConfig } = require(\"metro-config\");\n\nconst { InspectorProxy } = require(\"metro-inspector-proxy\");\n\nconst { parse } = require(\"url\");\n\nconst ws = require(\"ws\");\n\nasync function getConfig(config) {\n  const defaultConfig = await getDefaultConfig(config.projectRoot);\n  return mergeConfig(defaultConfig, config);\n}\n\nasync function runMetro(config, options) {\n  const mergedConfig = await getConfig(config);\n  const {\n    reporter,\n    server: { port },\n  } = mergedConfig;\n  reporter.update({\n    hasReducedPerformance: options\n      ? Boolean(options.hasReducedPerformance)\n      : false,\n    port,\n    type: \"initialize_started\",\n  });\n  const { waitForBundler = false, ...serverOptions } =\n    options !== null && options !== void 0 ? options : {};\n  const server = new MetroServer(mergedConfig, serverOptions);\n  const readyPromise = server\n    .ready()\n    .then(() => {\n      reporter.update({\n        type: \"initialize_done\",\n        port,\n      });\n    })\n    .catch((error) => {\n      reporter.update({\n        type: \"initialize_failed\",\n        port,\n        error,\n      });\n    });\n\n  if (waitForBundler) {\n    await readyPromise;\n  }\n\n  return server;\n}\n\nexports.runMetro = runMetro;\nexports.loadConfig = loadConfig;\n\nconst createConnectMiddleware = async function (config, options) {\n  const metroServer = await runMetro(config, options);\n  let enhancedMiddleware = metroServer.processRequest; // Enhance the resulting middleware using the config options\n\n  if (config.server.enhanceMiddleware) {\n    enhancedMiddleware = config.server.enhanceMiddleware(\n      enhancedMiddleware,\n      metroServer\n    );\n  }\n\n  return {\n    attachHmrServer(httpServer) {\n      const wss = createWebsocketServer({\n        websocketServer: new MetroHmrServer(\n          metroServer.getBundler(),\n          metroServer.getCreateModuleId(),\n          config\n        ),\n      });\n      httpServer.on(\"upgrade\", (request, socket, head) => {\n        const { pathname } = parse(request.url);\n\n        if (pathname === \"/hot\") {\n          wss.handleUpgrade(request, socket, head, (ws) => {\n            wss.emit(\"connection\", ws, request);\n          });\n        } else {\n          socket.destroy();\n        }\n      });\n    },\n\n    metroServer,\n    middleware: enhancedMiddleware,\n\n    end() {\n      metroServer.end();\n    },\n  };\n};\n\nexports.createConnectMiddleware = createConnectMiddleware;\n\nexports.runServer = async (\n  config,\n  {\n    hasReducedPerformance = false,\n    host,\n    onError,\n    onReady,\n    secureServerOptions,\n    secure,\n    //deprecated\n    secureCert,\n    // deprecated\n    secureKey,\n    // deprecated\n    waitForBundler = false,\n    websocketEndpoints = {},\n  }\n) => {\n  if (secure != null || secureCert != null || secureKey != null) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      chalk.inverse.yellow.bold(\" DEPRECATED \"),\n      \"The `secure`, `secureCert`, and `secureKey` options are now deprecated. \" +\n        \"Please use the `secureServerOptions` object instead to pass options to \" +\n        \"Metro's https development server.\"\n    );\n  } // Lazy require\n\n  const connect = require(\"connect\");\n\n  const serverApp = connect();\n  const { middleware, end, metroServer } = await createConnectMiddleware(\n    config,\n    {\n      hasReducedPerformance,\n      waitForBundler,\n    }\n  );\n  serverApp.use(middleware);\n  let inspectorProxy = null;\n\n  if (config.server.runInspectorProxy) {\n    inspectorProxy = new InspectorProxy(config.projectRoot);\n  }\n\n  let httpServer;\n\n  if (secure || secureServerOptions != null) {\n    let options = secureServerOptions;\n\n    if (typeof secureKey === \"string\" && typeof secureCert === \"string\") {\n      options = Object.assign(\n        {\n          key: fs.readFileSync(secureKey),\n          cert: fs.readFileSync(secureCert),\n        },\n        secureServerOptions\n      );\n    }\n\n    httpServer = https.createServer(options, serverApp);\n  } else {\n    httpServer = http.createServer(serverApp);\n  }\n\n  httpServer.on(\"error\", (error) => {\n    if (onError) {\n      onError(error);\n    }\n\n    end();\n  });\n  return new Promise((resolve, reject) => {\n    httpServer.listen(config.server.port, host, () => {\n      if (onReady) {\n        onReady(httpServer);\n      }\n\n      Object.assign(websocketEndpoints, {\n        ...(inspectorProxy\n          ? { ...inspectorProxy.createWebSocketListeners(httpServer) }\n          : {}),\n        \"/hot\": createWebsocketServer({\n          websocketServer: new MetroHmrServer(\n            metroServer.getBundler(),\n            metroServer.getCreateModuleId(),\n            config\n          ),\n        }),\n      });\n      httpServer.on(\"upgrade\", (request, socket, head) => {\n        const { pathname } = parse(request.url);\n\n        if (pathname != null && websocketEndpoints[pathname]) {\n          websocketEndpoints[pathname].handleUpgrade(\n            request,\n            socket,\n            head,\n            (ws) => {\n              websocketEndpoints[pathname].emit(\"connection\", ws, request);\n            }\n          );\n        } else {\n          socket.destroy();\n        }\n      });\n\n      if (inspectorProxy) {\n        // TODO(hypuk): Refactor inspectorProxy.processRequest into separate request handlers\n        // so that we could provide routes (/json/list and /json/version) here.\n        // Currently this causes Metro to give warning about T31407894.\n        // $FlowFixMe[method-unbinding] added when improving typing for this parameters\n        serverApp.use(inspectorProxy.processRequest.bind(inspectorProxy));\n      }\n\n      resolve(httpServer);\n    }); // Disable any kind of automatic timeout behavior for incoming\n    // requests in case it takes the packager more than the default\n    // timeout of 120 seconds to respond to a request.\n\n    httpServer.timeout = 0;\n    httpServer.on(\"error\", (error) => {\n      end();\n      reject(error);\n    });\n    httpServer.on(\"close\", () => {\n      end();\n    });\n  });\n};\n\nexports.runBuild = async (\n  config,\n  {\n    dev = false,\n    entry,\n    onBegin,\n    onComplete,\n    onProgress,\n    minify = true,\n    output = outputBundle,\n    out,\n    platform = \"web\",\n    sourceMap = false,\n    sourceMapUrl,\n  }\n) => {\n  const metroServer = await runMetro(config, {\n    watch: false,\n  });\n\n  try {\n    const requestOptions = {\n      dev,\n      entryFile: entry,\n      inlineSourceMap: sourceMap && !sourceMapUrl,\n      minify,\n      platform,\n      sourceMapUrl: sourceMap === false ? undefined : sourceMapUrl,\n      createModuleIdFactory: config.serializer.createModuleIdFactory,\n      onProgress,\n    };\n\n    if (onBegin) {\n      onBegin();\n    }\n\n    const metroBundle = await output.build(metroServer, requestOptions);\n\n    if (onComplete) {\n      onComplete();\n    }\n\n    if (out) {\n      const bundleOutput = out.replace(/(\\.js)?$/, \".js\");\n      const sourcemapOutput =\n        sourceMap === false ? undefined : out.replace(/(\\.js)?$/, \".map\");\n      const outputOptions = {\n        bundleOutput,\n        sourcemapOutput,\n        dev,\n        platform,\n      }; // eslint-disable-next-line no-console\n\n      await output.save(metroBundle, outputOptions, console.log);\n    }\n\n    return metroBundle;\n  } finally {\n    await metroServer.end();\n  }\n};\n\nexports.buildGraph = async function (\n  config,\n  {\n    customTransformOptions = Object.create(null),\n    dev = false,\n    entries,\n    minify = false,\n    onProgress,\n    platform = \"web\",\n    type = \"module\",\n  }\n) {\n  const mergedConfig = await getConfig(config);\n  const bundler = new IncrementalBundler(mergedConfig);\n\n  try {\n    return await bundler.buildGraphForEntries(entries, {\n      ...MetroServer.DEFAULT_GRAPH_OPTIONS,\n      customTransformOptions,\n      dev,\n      minify,\n      platform,\n      type,\n    });\n  } finally {\n    bundler.end();\n  }\n};\n\nexports.attachMetroCli = function (\n  yargs,\n  { build = {}, serve = {}, dependencies = {} } = {}\n) {\n  if (build) {\n    const { command, description, builder, handler } = makeBuildCommand();\n    yargs.command(command, description, builder, handler);\n  }\n\n  if (serve) {\n    const { command, description, builder, handler } = makeServeCommand();\n    yargs.command(command, description, builder, handler);\n  }\n\n  if (dependencies) {\n    const { command, description, builder, handler } =\n      makeDependenciesCommand();\n    yargs.command(command, description, builder, handler);\n  }\n\n  return yargs;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}